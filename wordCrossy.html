<HTML>
	<button type="button" onclick="createGame()"> New Game </button>
	<style>	
	table {
		border: 2px solid black;
	}
	th, td {
		padding: 15px;
		border: 2px solid black;
	}
	</style>
	<table id="gameBoard"> </table>
	<script language="JavaScript">
	var words = [["purple", "pulp", "rue", "pure"],["banish", "bash","nab", "bias"]];
	var locations = [["xxxxXxxxxxxXxxxxxxXxxxXXXXXXxXxXxxxxXxXxxxxXxxxxx","2,4,a", "5,1,d", "4,4,d", "2,4,d"], ["xxxXxxxxxXXXXxXxxXxxxXxxXxxxXXXXxxxxxxXxxxxxxxxxx", "4,1,d", "3,2,a", "1,3,d", "1,5,a"]];
	function drawGameBoard(gameValue) {
		//Draw Game Board
		var numRows = 7;
		var numColumns = 7;
		var gameBoard = document.getElementById("gameBoard");
		var locationsMatrix = locations[gameValue][0].split('');
		for(var rowCount = numRows; rowCount > 0; rowCount--)
			{
				var row = gameBoard.insertRow(0);
				for(var columnCount = numColumns; columnCount > 0; columnCount--)
				{
					var cell1 = row.insertCell(0);
					cell1.innerHTML = (columnCount.toString()) + "," + (rowCount.toString());
					cell1.coords = [columnCount, rowCount];
					cell1.totalIndex = columnCount + (rowCount -1) * numRows;
					//Check the locations matrix and see if there is an "X" in the same postion. Subtract 1 from the total index because the location array starts at index 0 but coords start at 1
					if(locationsMatrix[cell1.totalIndex - 1] === "X")
					{
						cell1.innerHTML = "";
					}
					else {
						cell1.style.backgroundColor = "#000000";	
					}
				}	
			}
			
	}
	</script>

	<table id="lettersTable"></table>

	<table id="palette"></table>

	<script>
	function drawLetterTable() {
		//Draw Letter Table
		var maxLetters = 6;
		var table = document.getElementById("lettersTable");
		var row = table.insertRow(0);
		row.id = "cells";
		var lettersArray = [];
		for(var letterCount = 0; letterCount < maxLetters; letterCount++)
		{
			var cell1 = row.insertCell(letterCount);
			cell1.onclick = cellOnClick;
			lettersArray = [...lettersArray, cell1];
		}	
		return lettersArray;
	}

	function drawGuessingPalette() {
		var paletteSize = 7;
		var paletteTable = document.getElementById("palette");
		var paletteRow = paletteTable.insertRow(0);
		for(var i = 0; i < paletteSize; i++) {
			var paletteCell = paletteRow.insertCell(i);
		}
	}

	function findFirstEmptyPaletteCell() {
		var paletteCells = document.getElementById("palette").rows[0].cells;
		var count = 0;
		var firstEmptyIndex;
		while(paletteCells[count].innerHTML !== ""){
			count++
		}
		firstEmptyIndex = count;
		return firstEmptyIndex;
	}

	function cellOnClick() {
		var paletteCells = document.getElementById("palette").rows[0].cells;
		var firstEmptyIndex = findFirstEmptyPaletteCell()
		paletteCells[firstEmptyIndex].innerHTML = this.innerHTML;
		this.innerHTML = "";
	}
	
	function setupLetters(letterCells, words, gameValue) {
		var allLetters = words[gameValue][0];
		var sortedLetters = allLetters.split('').sort().join('');
		for(var i = 0; i < letterCells.length; i++)
		{		
			letterCells[i].innerHTML = sortedLetters[i];
		}
	}
	
	function createGame() {
		var gameValue = Math.floor(Math.random() * words.length);
		drawGameBoard(gameValue);
		var letters = drawLetterTable();
		setupLetters(letters, words, gameValue);
		drawGuessingPalette();
	}

	function shuffleLetters() {
		var lettersCells = document.getElementById("cells").cells;
		var currentIndex = lettersCells.length;
		var temporaryValue;
		var randomIndex;
		while(0 !== currentIndex) {
			randomIndex = Math.floor(Math.random() * currentIndex);
			currentIndex -=1;

			temporaryValue = lettersCells[currentIndex].innerHTML;
			lettersCells[currentIndex].innerHTML = lettersCells[randomIndex].innerHTML;
			lettersCells[randomIndex].innerHTML = temporaryValue;
		}
	}

	window.onload = createGame();
	</script>
	<button type="button" onclick="shuffleLetters()"> Shuffle </button>


</HTML>
